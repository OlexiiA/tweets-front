import{j as e,r as c,a as u,b as N,u as v,c as b,i as C,d as k,L as p,e as T,Q as A,f as D}from"./index-4d0f3cfb.js";import{P as f,h as E,A as S,a as P,b as U,c as Y}from"./moment-9428cbec.js";const j=({cmt:s})=>{const l=s.comments.trim().toUpperCase().split("").slice(0,2);return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center shrink-0 rounded-full w-10 h-10 bg-blue-300 text-sm",children:l}),e.jsx("div",{className:"flex text-gray-300 text-[10px]",children:s.comments})]})};j.propTypes={cmt:f.shape({comments:f.string.isRequired}).isRequired};const R=()=>{var h;const[s,l]=c.useState(null),[x,o]=c.useState(""),{user:n}=u(t=>t.auth),{comments:r}=u(t=>t.comment),a=N(),i=v(),g=b(),m=c.useCallback(async()=>{const{data:t}=await C.get(`/tweets/${a.id}`);l(t)},[a.id]),d=c.useCallback(async()=>{try{await i(k(a.id))}catch(t){console.log(t)}},[i,a.id]);if(c.useEffect(()=>{m()},[m]),c.useEffect(()=>{d()},[d]),!s)return e.jsx("div",{className:"text-xl text-center text-white py-10",children:"No tweets!"});const y=()=>{try{i(T(a.id)),A("Tweet was delete"),g("/tweets")}catch(t){console.log(t)}},w=async()=>{try{const t=a.id;await i(D({tweetId:t,comment:x})),o("")}catch(t){console.log(t)}};return e.jsxs("div",{className:"max-w-full mx-auto py-10 p-4",children:[e.jsx("button",{className:"flex justify-center items-center bg-blue-700 text-xs text-white rounded-md py-2 px-4",children:e.jsx(p,{to:"/",children:"Back"})}),e.jsxs("div",{className:"flex gap-10 py-8",children:[e.jsxs("div",{className:"w-2/3",children:[e.jsx("div",{className:"flex flex-col basis-1/4 flex-grow",children:e.jsx("div",{className:s.imageUrl?"flex rounded-sm h-80":"flex-rounded-sm",children:s.imageUrl&&e.jsx("img",{src:`https://tweets-api-sztu.onrender.com/${s.imageUrl}`,alt:"image",className:"object-cover flex items-center h-full rounded-sm"})})}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsx("div",{className:"text-xs text-white opacity-50",children:s.email}),e.jsx("div",{className:"text-xs text-white opacity-50",children:E(s.createdAt).format("YYYY/MM/DD")})]}),e.jsx("div",{className:"text-white text-xl",children:s.title}),e.jsx("p",{className:"text-white opacity-60 text-xs pt-4",children:s.text}),e.jsxs("div",{className:"flex gap-3 items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsxs("button",{className:"flex items-center justify-center gap-2 text-xs text-white opacity-50",children:[e.jsx(S,{className:"animate-pulse"})," ",e.jsx("span",{className:"animate-pulse",children:s.views})]}),e.jsxs("button",{className:"flex items-center justify-center gap-2 text-xs text-white opacity-50",children:[e.jsx(P,{})," ",e.jsx("span",{children:((h=s.comments)==null?void 0:h.length)||0})]})]}),(n==null?void 0:n._id)===s.author&&e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsx("button",{className:"flex items-center justify-center gap-2 text-white opacity-50",children:e.jsx(p,{to:`/${a.id}/edit`,children:e.jsx(U,{})})}),e.jsx("button",{onClick:y,className:"flex items-center justify-center gap-2 text-white opacity-50",children:e.jsx(Y,{})})]})]})]}),e.jsxs("div",{className:"w-1/3 p-8 bg-gray-700 flex flex-col gap-2 rounded-sm",children:[e.jsxs("form",{onSubmit:t=>t.preventDefault(),className:"flex gap-2",children:[e.jsx("input",{type:"text",value:x,onChange:t=>o(t.target.value),placeholder:"Leave your comment",className:"text-black w-full rounded-sm bg-gray-400 border p-2 text-xs outline-none placeholder:text-gray-700"}),e.jsx("button",{onClick:w,type:"submit",className:"flex justify-center items-center bg-gray-600 text-xs text-white rounded-sm py-2 px-4",children:"Send"})]}),r==null?void 0:r.map(t=>e.jsx(j,{cmt:t},t._id))]})]})]})};export{R as default};
